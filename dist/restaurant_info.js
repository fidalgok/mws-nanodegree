!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";class r{static get DATABASE_URL(){return"http://127.0.0.1:1337/restaurants"}static fetchRestaurants(e){let t=new XMLHttpRequest;t.open("GET",r.DATABASE_URL),t.onload=(()=>{if(200===t.status){const n=JSON.parse(t.responseText);e(null,n)}else{const n=`Request failed. Returned status of ${t.status}`;e(n,null)}}),t.send()}static fetchRestaurantById(e,t){r.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.find(t=>t.id==e);n?t(null,n):t("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(e,t){r.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.filter(t=>t.cuisine_type==e);t(null,n)}})}static fetchRestaurantByNeighborhood(e,t){r.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.filter(t=>t.neighborhood==e);t(null,n)}})}static fetchRestaurantByCuisineAndNeighborhood(e,t,n){r.fetchRestaurants((r,a)=>{if(r)n(r,null);else{let r=a;"all"!=e&&(r=r.filter(t=>t.cuisine_type==e)),"all"!=t&&(r=r.filter(e=>e.neighborhood==t)),n(null,r)}})}static fetchNeighborhoods(e){r.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].neighborhood),r=t.filter((e,n)=>t.indexOf(e)==n);e(null,r)}})}static fetchCuisines(e){r.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].cuisine_type),r=t.filter((e,n)=>t.indexOf(e)==n);e(null,r)}})}static urlForRestaurant(e){return`./restaurant.html?id=${e.id}`}static imageUrlForRestaurant(e){return"photographs"in e?e.photographs.map(e=>`/images/${e}`):`/src_img/${e.photograph}.jpg`}static mapMarkerForRestaurant(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:r.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}}t.a=r},,function(e,t,n){"use strict";n.r(t);var r=n(0);window.initMap=(()=>{!function(e){if(self.restaurant)return void e(null,self.restaurant);const t=function(e,t){t||(t=window.location.href);e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("id");t?r.a.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(!function(e=self.restaurant){document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img").querySelector("picture"),n=document.createElement("img"),a=r.a.imageUrlForRestaurant(e);if(Array.isArray(a)){const r=document.createElement("source"),s=document.createElement("source");a.forEach(e=>{let t=e.split("-")[2],n=e.split("-")[3].slice(0,2);if("sm"===t)if(r.setAttribute("media","(max-width: 767px)"),r.getAttribute("srcset")){let t=r.getAttribute("srcset");r.setAttribute("srcset",t+=`, ${e} ${n}`)}else r.setAttribute("srcset",`${e} ${n}`);else s.setAttribute("media","(min-width:768px)"),s.setAttribute("srcset",e)}),n.src=a[0],n.alt=`${e.name} in ${e.neighborhood} \n     serves ${e.cuisine_type} cuisine.\n    `,t.appendChild(r),t.appendChild(s),t.appendChild(n)}else n.src=a;n.className="restaurant-img",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&function(e=self.restaurant.operating_hours){const t=document.getElementById("restaurant-hours");for(let n in e){const r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);const s=document.createElement("td");s.innerHTML=e[n],r.appendChild(s),t.appendChild(r)}}();!function(e=self.restaurant.reviews){const t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const r=document.getElementById("reviews-list");e.forEach(e=>{r.appendChild(function(e){const t=document.createElement("li"),n=document.createElement("p"),r=document.createElement("div");n.innerHTML=e.name,r.appendChild(n),r.classList.add("review__header","review--black"),t.appendChild(r);const a=document.createElement("p");a.innerHTML=e.date,r.appendChild(a);const s=document.createElement("p");s.innerHTML=`Rating: ${e.rating}`,s.classList.add("review--orange","review__rating"),t.appendChild(s);const i=document.createElement("p");return i.innerHTML=e.comments,t.appendChild(i),t}(e))}),t.appendChild(r)}()}(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),function(e=self.restaurant){const t=document.getElementById("breadcrumb").querySelector("ul"),n=document.createElement("li");n.innerHTML=e.name,n.setAttribute("aria-current","page"),t.appendChild(n)}(),r.a.mapMarkerForRestaurant(self.restaurant,self.map))})})}]);